---
description: 
globs: 
alwaysApply: false
---
# Widget Accessibility Requirements

## Core Accessibility Patterns

### ARIA Attributes
All interactive widgets MUST include:
```python
# For form inputs
Input(
    type="text",
    name=step.done,
    aria-required="true",
    aria-labelledby=f"{step_id}-title",
    aria-describedby=f"{step_id}-description"
)

# For buttons
Button(
    "Submit",
    type="submit",
    aria-label="Submit form",
    role="button"
)

# For containers
Div(
    role="region",
    aria-labelledby=f"{step_id}-title",
    aria-live="polite"  # For dynamic content
)
```

### Keyboard Navigation
- All interactive elements must be keyboard focusable
- Use proper tab order
- Include keyboard shortcuts where appropriate
- Handle Enter key for form submission
- Support Escape key for canceling

### Screen Reader Support
- Use semantic HTML elements
- Include descriptive labels
- Announce dynamic updates
- Provide status messages
- Handle focus management

### Color and Contrast
- Maintain WCAG 2.1 contrast ratios
- Don't rely solely on color
- Use multiple visual indicators
- Support high contrast mode
- Test with color blindness simulators

## Implementation Examples

### Form Input
```python
Div(
    Card(
        H3(f"{step.show}", id=f"{step_id}-title"),
        P("Instructions", id=f"{step_id}-description"),
        Form(
            Input(
                type="text",
                name=step.done,
                required=True,
                aria-required="true",
                aria-labelledby=f"{step_id}-title",
                aria-describedby=f"{step_id}-description",
                _="on keydown[key=='Enter'] halt the event then trigger click on <button[type='submit']/>"
            ),
            Button(
                "Submit",
                type="submit",
                aria-label="Submit form",
                role="button"
            )
        )
    ),
    role="region",
    aria-labelledby=f"{step_id}-title"
)
```

### Dynamic Content
```python
Div(
    Card(
        H3(f"{step.show}", id=f"{step_id}-title"),
        P(id=f"{step_id}-status", aria-live="polite")
    ),
    role="region",
    aria-labelledby=f"{step_id}-title"
)
```

### Error Messages
```python
P(
    "Error message",
    style=pip.get_style("error"),
    role="alert",
    aria-live="assertive"
)
```

## Common Pitfalls
1. Missing ARIA attributes
2. Poor keyboard support
3. Inadequate screen reader support
4. Insufficient color contrast
5. Missing error announcements
6. Poor focus management
7. Incomplete form labels
8. Missing status updates

## Testing Requirements
- Test with screen readers
- Verify keyboard navigation
- Check color contrast
- Validate ARIA attributes
- Test with different devices
- Verify error handling
- Check focus management
- Test dynamic updates

## Related Rules
- [Widget Implementation](mdc:widget-implementation.mdc)
- [Mobile Responsiveness](mdc:mobile-responsiveness.mdc)
- [Error Handling](mdc:error-handling.mdc)
