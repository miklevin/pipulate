{
  "recipe_name": "Idempotent Profile Creation - Single Session",
  "description": "Creates a single test profile with meaningful, timestamped naming in ONE browser session",
  "version": "2.0",
  "headless_mode": false,
  "url": "http://localhost:5001/profiles",
  "timing": {
    "page_load_wait": 2,
    "form_interaction_delay": 0.5,
    "between_fields_delay": 0.3,
    "post_submit_wait": 3,
    "final_verification_wait": 2
  },
  "form_data": {
    "profile_name": "AI_Test_Run_{{ timestamp }}",
    "profile_real_name": "AI Automation Test Session",
    "profile_address": "test-automation-{{ timestamp }}.example.com",
    "profile_code": "AI{{ timestamp_short }}"
  },
  "steps": [
    {
      "step": 1,
      "type": "navigate",
      "description": "Navigate to profiles page",
      "action": "navigate_with_verification",
      "params": {
        "url": "http://localhost:5001/profiles",
        "wait_for_element": {"type": "id", "value": "profile-name-input-add"},
        "timeout_seconds": 15,
        "capture_screenshot": true
      }
    },
    {
      "step": 2,
      "type": "form_fill",
      "description": "Fill profile name field",
      "action": "browser_interact_enhanced",
      "params": {
        "action": "type",
        "selector": {"type": "id", "value": "profile-name-input-add"},
        "text": "{{ profile_name }}",
        "pre_checks": ["visible", "enabled"],
        "verify_text": true,
        "capture_screenshot": true
      }
    },
    {
      "step": 3,
      "type": "form_fill",
      "description": "Fill real name field",
      "action": "browser_interact_enhanced",
      "params": {
        "action": "type",
        "selector": {"type": "id", "value": "profile-real-name-input-add"},
        "text": "{{ profile_real_name }}",
        "pre_checks": ["visible", "enabled"],
        "verify_text": true,
        "capture_screenshot": true
      }
    },
    {
      "step": 4,
      "type": "form_fill",
      "description": "Fill address field",
      "action": "browser_interact_enhanced",
      "params": {
        "action": "type",
        "selector": {"type": "id", "value": "profile-address-input-add"},
        "text": "{{ profile_address }}",
        "pre_checks": ["visible", "enabled"],
        "verify_text": true,
        "capture_screenshot": true
      }
    },
    {
      "step": 5,
      "type": "form_fill",
      "description": "Fill code field",
      "action": "browser_interact_enhanced",
      "params": {
        "action": "type",
        "selector": {"type": "id", "value": "profile-code-input-add"},
        "text": "{{ profile_code }}",
        "pre_checks": ["visible", "enabled"],
        "verify_text": true,
        "capture_screenshot": true
      }
    },
    {
      "step": 6,
      "type": "submit",
      "description": "Submit the completed form",
      "action": "browser_interact_enhanced",
      "params": {
        "action": "click",
        "selector": {"type": "id", "value": "add-profile-button"},
        "pre_checks": ["visible", "enabled", "clickable"],
        "capture_screenshot": true,
        "wait_after": 3000
      }
    },
    {
      "step": 7,
      "type": "verify",
      "description": "Verify profile was created successfully",
      "action": "browser_scrape_page",
      "params": {
        "url": "http://localhost:5001/profiles",
        "wait_seconds": 2
      }
    }
  ],
  "error_handling": {
    "fallback_selectors": {
      "profile_name": [
        {"type": "name", "value": "profile_name"},
        {"type": "css", "value": "input[placeholder*='Profile Name']"}
      ],
      "profile_real_name": [
        {"type": "name", "value": "profile_real_name"},
        {"type": "css", "value": "input[placeholder*='Real Name']"}
      ],
      "profile_address": [
        {"type": "name", "value": "profile_address"},
        {"type": "css", "value": "input[placeholder*='Address']"}
      ],
      "profile_code": [
        {"type": "name", "value": "profile_code"},
        {"type": "css", "value": "input[placeholder*='Code']"}
      ]
    },
    "retry_strategy": {
      "max_retries": 3,
      "backoff_delay": 1000
    }
  }
}
