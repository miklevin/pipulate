{
  "timestamp": "2025-07-04T20:08:29.196397",
  "git_status": {
    "status": "?? helpers/code_surgery/pre_surgery_state_capture.py",
    "last_commit": {
      "hash": "b3a5b2bb73d1645a0e70ebed893242c7f11b8457",
      "message": "``` feat: Enhance server refactor demo - Detect exact order dependencies",
      "author": "Mike Levin",
      "date": "Fri Jul 4 20:03:30 2025 -0400"
    }
  },
  "file_metrics": {
    "file_path": "server.py",
    "total_lines": 7125,
    "non_empty_lines": 6188,
    "total_characters": 348689,
    "token_estimate": 29438,
    "file_size_bytes": 350173,
    "last_modified": "2025-07-04T11:48:35.144996"
  },
  "ast_analysis": {
    "blocks_found": 264,
    "imports_count": 64,
    "exports_count": 127,
    "raw_output": "Analysis of server.py:\n  Blocks found: 264\n  Imports: 64\n  Exports: 127\n\nBlocks:\n  import_import_argparse_0001: import 'import_argparse' (lines 1-1)\n  import_import_ast_0002: import 'import_ast' (lines 2-2)\n  import_import_asyncio_0003: import 'import_asyncio' (lines 3-3)\n  import_import_functools_0004: import 'import_functools' (lines 4-4)\n  import_import_importlib_0005: import 'import_importlib' (lines 5-5)\n  import_import_inspect_0006: import 'import_inspect' (lines 6-6)\n  import_import_json_0007: import 'import_json' (lines 7-7)\n  import_import_os_0008: import 'import_os' (lines 8-8)\n  import_import_platform_0009: import 'import_platform' (lines 9-9)\n  import_import_re_0010: import 'import_re' (lines 10-10)\n  import_import_socket_0011: import 'import_socket' (lines 11-11)\n  import_import_sqlite3_0012: import 'import_sqlite3' (lines 12-12)\n  import_import_subprocess_0013: import 'import_subprocess' (lines 13-13)\n  import_import_sys_0014: import 'import_sys' (lines 14-14)\n  import_import_time_0015: import 'import_time' (lines 15-15)\n  import_import_traceback_0016: import 'import_traceback' (lines 16-16)\n  import_import_urllib_parse_0017: import 'import_urllib_parse' (lines 17-17)\n  import_import_warnings_0019: import 'import_warnings' (lines 19-19)\n  import_from_collections_import_deque_0020: import 'from_collections_import_deque' (lines 20-20)\n  import_from_datetime_import_datetime_0021: import 'from_datetime_import_datetime' (lines 21-21)\n  import_from_pathlib_import_path_0022: import 'from_pathlib_import_Path' (lines 22-22)\n  import_from_typing_import_asyncgenerator_0023: import 'from_typing_import_AsyncGenerator' (lines 23-23)\n  import_import_aiohttp_0025: import 'import_aiohttp' (lines 25-25)\n  import_import_uvicorn_0026: import 'import_uvicorn' (lines 26-26)\n  import_from_fasthtml_common_import___0027: import 'from_fasthtml_common_import_*' (lines 27-27)\n  import_from_loguru_import_logger_0028: import 'from_loguru_import_logger' (lines 28-28)\n  import_from_pyfiglet_import_figlet_0029: import 'from_pyfiglet_import_Figlet' (lines 29-29)\n  import_from_rich_align_import_align_0030: import 'from_rich_align_import_Align' (lines 30-30)\n  import_from_rich_box_import_ascii_0031: import 'from_rich_box_import_ASCII' (lines 31-31)\n  import_from_rich_console_import_console_0032: import 'from_rich_console_import_Console' (lines 32-32)\n  import_from_rich_json_import_json_0033: import 'from_rich_json_import_JSON' (lines 33-33)\n  import_from_rich_panel_import_panel_0034: import 'from_rich_panel_import_Panel' (lines 34-34)\n  import_from_rich_style_import_style_0035: import 'from_rich_style_import_Style' (lines 35-35)\n  import_from_rich_table_import_table_0036: import 'from_rich_table_import_Table' (lines 36-36)\n  import_from_rich_theme_import_theme_0037: import 'from_rich_theme_import_Theme' (lines 37-37)\n  import_from_starlette_middleware_base_import_basehttpmiddleware_0038: import 'from_starlette_middleware_base_import_BaseHTTPMiddleware' (lines 38-38)\n  import_from_starlette_middleware_cors_import_corsmiddleware_0039: import 'from_starlette_middleware_cors_import_CORSMiddleware' (lines 39-39)\n  import_from_starlette_responses_import_fileresponse_0040: import 'from_starlette_responses_import_FileResponse' (lines 40-40)\n  import_from_starlette_routing_import_route_0041: import 'from_starlette_routing_import_Route' (lines 41-41)\n  import_from_starlette_websockets_import_websocket_0042: import 'from_starlette_websockets_import_WebSocket' (lines 42-42)\n  import_from_watchdog_events_import_filesystemeventhandler_0043: import 'from_watchdog_events_import_FileSystemEventHandler' (lines 43-43)\n  import_from_watchdog_observers_import_observer_0044: import 'from_watchdog_observers_import_Observer' (lines 44-44)\n  assignment_mcp_tool_registry_0048: assignment 'MCP_TOOL_REGISTRY' (lines 48-48)\n  import_from_mcp_tools_import_register_all_mcp_tools_0050: import 'from_mcp_tools_import_register_all_mcp_tools' (lines 50-50)\n  import_import_mcp_tools_0052: import 'import_mcp_tools' (lines 52-52)\n  other_other_55_0055: other 'other_55' (lines 55-55)\n  assignment_debug_mode_0058: assignment 'DEBUG_MODE' (lines 58-58)\n  assignment_state_tables_0059: assignment 'STATE_TABLES' (lines 59-59)\n  assignment_table_lifecycle_logging_0060: assignment 'TABLE_LIFECYCLE_LOGGING' (lines 60-60)\n  assignment_testing_mode_0063: assignment 'TESTING_MODE' (lines 63-63)\n  assignment_deep_testing_0064: assignment 'DEEP_TESTING' (lines 64-64)\n  assignment_browser_testing_0065: assignment 'BROWSER_TESTING' (lines 65-65)\n  assignment_banner_colors_0071: assignment 'BANNER_COLORS' (lines 71-107)\n  assignment_custom_theme_0109: assignment 'custom_theme' (lines 109-109)\n  class_debugconsole_0111: class 'DebugConsole' (lines 111-122)\n  assignment_console_0123: assignment 'console' (lines 123-123)\n  function_rich_json_display_0126: function 'rich_json_display' (lines 126-189)\n  function_rich_dict_display_0192: function 'rich_dict_display' (lines 192-197)\n  function_strip_rich_formatting_0200: function 'strip_rich_formatting' (lines 200-206)\n  function_share_ascii_with_ai_0209: function 'share_ascii_with_ai' (lines 209-213)\n  import_from_helpers_ascii_displays_import_falling_alice_0217: import 'from_helpers_ascii_displays_import_falling_alice' (lines 217-222)\n  function_setup_logging_0225: function 'setup_logging' (lines 225-334)\n  function_rotate_looking_at_directory_0337: function 'rotate_looking_at_directory' (lines 337-421)\n  assignment_logger_0424: assignment 'logger' (lines 424-424)\n  other_other_427_0427: other 'other_427' (lines 427-428)\n  other_other_432_0432: other 'other_432' (lines 432-432)\n  other_other_434_0434: other 'other_434' (lines 434-438)\n  assignment_shared_app_state_0440: assignment 'shared_app_state' (lines 440-440)\n  assignment_message_coordination_0443: assignment 'message_coordination' (lines 443-447)\n  class_gracefulrestartexception_0449: class 'GracefulRestartException' (lines 449-451)\n  function_is_critical_operation_in_progress_0453: function 'is_critical_operation_in_progress' (lines 453-455)\n  function_set_critical_operation_flag_0457: function 'set_critical_operation_flag' (lines 457-460)\n  function_clear_critical_operation_flag_0462: function 'clear_critical_operation_flag' (lines 462-467)\n  function_get_app_name_0469: function 'get_app_name' (lines 469-482)\n  function_get_db_filename_0484: function 'get_db_filename' (lines 484-489)\n  function_get_current_environment_0491: function 'get_current_environment' (lines 491-498)\n  function_get_nix_version_0500: function 'get_nix_version' (lines 500-532)\n  function_get_backup_status_0534: function 'get_backup_status' (lines 534-588)\n  assignment_env_file_0590: assignment 'ENV_FILE' (lines 590-590)\n  assignment_app_name_0592: assignment 'APP_NAME' (lines 592-592)\n  other_other_593_0593: other 'other_593' (lines 593-593)\n  assignment_db_filename_0595: assignment 'DB_FILENAME' (lines 595-595)\n  other_other_596_0596: other 'other_596' (lines 596-596)\n  assignment_tone_0599: assignment 'TONE' (lines 599-599)\n  assignment_model_0600: assignment 'MODEL' (lines 600-600)\n  assignment_max_llm_response_words_0601: assignment 'MAX_LLM_RESPONSE_WORDS' (lines 601-601)\n  assignment_max_conversation_length_0602: assignment 'MAX_CONVERSATION_LENGTH' (lines 602-602)\n  assignment_home_menu_item_0603: assignment 'HOME_MENU_ITEM' (lines 603-603)\n  assignment_default_active_roles_0604: assignment 'DEFAULT_ACTIVE_ROLES' (lines 604-604)\n  other_other_606_0606: other 'other_606' (lines 606-606)\n  assignment_info_svg_0609: assignment 'INFO_SVG' (lines 609-609)\n  assignment_external_link_svg_0611: assignment 'EXTERNAL_LINK_SVG' (lines 611-611)\n  assignment_settings_svg_0613: assignment 'SETTINGS_SVG' (lines 613-613)\n  assignment_pconfig_0622: assignment 'PCONFIG' (lines 622-814)\n  assignment_home_menu_item_0817: assignment 'HOME_MENU_ITEM' (lines 817-817)\n  assignment_default_active_roles_0818: assignment 'DEFAULT_ACTIVE_ROLES' (lines 818-818)\n  function_register_mcp_tool_0828: function 'register_mcp_tool' (lines 828-836)\n  function__read_botify_api_token_0851: function '_read_botify_api_token' (lines 851-866)\n  other_other_881_0881: other 'other_881' (lines 881-932)\n  other_other_934_0934: other 'other_934' (lines 934-983)\n  other_other_985_0985: other 'other_985' (lines 985-1040)\n  function_print_and_log_table_1052: function 'print_and_log_table' (lines 1052-1100)\n  function_set_current_environment_1102: function 'set_current_environment' (lines 1102-1104)\n  function__recursively_parse_json_strings_1106: function '_recursively_parse_json_strings' (lines 1106-1162)\n  function__format_records_for_lifecycle_log_1164: function '_format_records_for_lifecycle_log' (lines 1164-1199)\n  function_log_dynamic_table_state_1201: function 'log_dynamic_table_state' (lines 1201-1234)\n  function_log_dictlike_db_to_lifecycle_1236: function 'log_dictlike_db_to_lifecycle' (lines 1236-1300)\n  function_log_raw_sql_table_to_lifecycle_1302: function 'log_raw_sql_table_to_lifecycle' (lines 1302-1318)\n  function_log_pipeline_summary_1320: function 'log_pipeline_summary' (lines 1320-1436)\n  class_logmanager_1438: class 'LogManager' (lines 1438-1508)\n  assignment_log_1509: assignment 'log' (lines 1509-1509)\n  class_ssebroadcaster_1511: class 'SSEBroadcaster' (lines 1511-1540)\n  assignment_broadcaster_1541: assignment 'broadcaster' (lines 1541-1541)\n  function_read_training_1543: function 'read_training' (lines 1543-1562)\n  other_other_1563_1563: other 'other_1563' (lines 1563-1566)\n  assignment_global_conversation_history_1567: assignment 'global_conversation_history' (lines 1567-1567)\n  assignment_conversation_1568: assignment 'conversation' (lines 1568-1568)\n  function_append_to_conversation_1570: function 'append_to_conversation' (lines 1570-1627)\n  function_title_name_1629: function 'title_name' (lines 1629-1643)\n  function_endpoint_name_1645: function 'endpoint_name' (lines 1645-1650)\n  function_pipeline_operation_1652: function 'pipeline_operation' (lines 1652-1673)\n  class_pipulate_1675: class 'Pipulate' (lines 1675-3226)\n  other_other_3228_3228: other 'other_3228' (lines 3228-3343)\n  other_other_3346_3346: other 'other_3346' (lines 3346-3497)\n  function_get_current_profile_id_3500: function 'get_current_profile_id' (lines 3500-3512)\n  function_create_chat_scripts_3514: function 'create_chat_scripts' (lines 3514-3548)\n  import_from_common_import_basecrud_3551: import 'from_common_import_BaseCrud' (lines 3551-3551)\n  class_chat_3610: class 'Chat' (lines 3610-3716)\n  assignment_pipulate_3718: assignment 'pipulate' (lines 3718-3718)\n  other_other_3719_3719: other 'other_3719' (lines 3719-3719)\n  other_other_3721_3721: other 'other_3721' (lines 3721-3721)\n  other_other_3722_3722: other 'other_3722' (lines 3722-3722)\n  other_other_3724_3724: other 'other_3724' (lines 3724-3728)\n  assignment_chat_3730: assignment 'chat' (lines 3730-3730)\n  other_other_3731_3731: other 'other_3731' (lines 3731-3731)\n  other_other_3734_3734: other 'other_3734' (lines 3734-3734)\n  other_other_3735_3735: other 'other_3735' (lines 3735-3735)\n  function_build_endpoint_messages_3737: function 'build_endpoint_messages' (lines 3737-3768)\n  function_build_endpoint_training_3770: function 'build_endpoint_training' (lines 3770-3795)\n  assignment_color_map_3796: assignment 'COLOR_MAP' (lines 3796-3796)\n  function_db_operation_3798: function 'db_operation' (lines 3798-3819)\n  class_dictlikedb_3821: class 'DictLikeDB' (lines 3821-3894)\n  assignment_db_3895: assignment 'db' (lines 3895-3895)\n  other_other_3896_3896: other 'other_3896' (lines 3896-3896)\n  function_populate_initial_data_3898: function 'populate_initial_data' (lines 3898-3949)\n  other_other_3950_3950: other 'other_3950' (lines 3950-3950)\n  other_other_3952_3952: other 'other_3952' (lines 3952-4052)\n  function_discover_plugin_files_4054: function 'discover_plugin_files' (lines 4054-4100)\n  function_find_plugin_classes_4102: function 'find_plugin_classes' (lines 4102-4137)\n  other_other_4139_4139: other 'other_4139' (lines 4139-4140)\n  assignment_plugin_instances_4142: assignment 'plugin_instances' (lines 4142-4142)\n  assignment_discovered_modules_4143: assignment 'discovered_modules' (lines 4143-4143)\n  assignment_discovered_classes_4144: assignment 'discovered_classes' (lines 4144-4144)\n  assignment_friendly_names_4145: assignment 'friendly_names' (lines 4145-4145)\n  assignment_endpoint_training_4146: assignment 'endpoint_training' (lines 4146-4146)\n  assignment_endpoint_registry_4150: assignment 'endpoint_registry' (lines 4150-4150)\n  function_register_plugin_endpoint_4152: function 'register_plugin_endpoint' (lines 4152-4181)\n  function_get_endpoint_url_4183: function 'get_endpoint_url' (lines 4183-4198)\n  function_get_display_name_4200: function 'get_display_name' (lines 4200-4211)\n  function_get_endpoint_message_4213: function 'get_endpoint_message' (lines 4213-4234)\n  other_other_4235_4235: other 'other_4235' (lines 4235-4323)\n  other_other_4324_4324: other 'other_4324' (lines 4324-4332)\n  assignment_base_menu_items_4333: assignment 'base_menu_items' (lines 4333-4333)\n  assignment_additional_menu_items_4334: assignment 'additional_menu_items' (lines 4334-4334)\n  other_other_4337_4337: other 'other_4337' (lines 4337-4419)\n  assignment_ordered_plugins_4421: assignment 'ordered_plugins' (lines 4421-4421)\n  other_other_4422_4422: other 'other_4422' (lines 4422-4424)\n  assignment_discovered_count_4427: assignment 'discovered_count' (lines 4427-4427)\n  assignment_registered_count_4428: assignment 'registered_count' (lines 4428-4428)\n  assignment_failed_count_4429: assignment 'failed_count' (lines 4429-4429)\n  other_other_4431_4431: other 'other_4431' (lines 4431-4431)\n  other_other_4433_4433: other 'other_4433' (lines 4433-4433)\n  other_other_4435_4435: other 'other_4435' (lines 4435-4443)\n  other_other_4445_4445: other 'other_4445' (lines 4445-4445)\n  other_other_4448_4448: other 'other_4448' (lines 4448-4448)\n  import_import_mcp_tools_4451: import 'import_mcp_tools' (lines 4451-4451)\n  import_from_mcp_tools_import_register_all_mcp_tools_4453: import 'from_mcp_tools_import_register_all_mcp_tools' (lines 4453-4453)\n  other_other_4454_4454: other 'other_4454' (lines 4454-4454)\n  other_other_4455_4455: other 'other_4455' (lines 4455-4455)\n  other_other_4458_4458: other 'other_4458' (lines 4458-4458)\n  other_other_4461_4461: other 'other_4461' (lines 4461-4461)\n  other_other_4464_4464: other 'other_4464' (lines 4464-4464)\n  assignment_tool_count_4467: assignment 'tool_count' (lines 4467-4467)\n  other_other_4468_4468: other 'other_4468' (lines 4468-4469)\n  other_other_4470_4470: other 'other_4470' (lines 4470-4470)\n  other_other_4473_4473: other 'other_4473' (lines 4473-4473)\n  other_other_4478_4478: other 'other_4478' (lines 4478-4478)\n  other_other_4481_4481: other 'other_4481' (lines 4481-4481)\n  other_other_4484_4484: other 'other_4484' (lines 4484-4484)\n  other_other_4487_4487: other 'other_4487' (lines 4487-4487)\n  other_other_4490_4490: other 'other_4490' (lines 4490-4490)\n  other_other_4493_4493: other 'other_4493' (lines 4493-4494)\n  other_other_4497_4497: other 'other_4497' (lines 4497-4499)\n  assignment_menu_items_4501: assignment 'MENU_ITEMS' (lines 4501-4501)\n  other_other_4502_4502: other 'other_4502' (lines 4502-4502)\n  function_get_profile_name_4504: function 'get_profile_name' (lines 4504-4514)\n  other_other_4516_4516: other 'other_4516' (lines 4516-4573)\n  function_create_nav_group_4575: function 'create_nav_group' (lines 4575-4588)\n  function_create_env_menu_4590: function 'create_env_menu' (lines 4590-4654)\n  function_create_nav_menu_4656: function 'create_nav_menu' (lines 4656-4711)\n  function_create_profile_menu_4713: function 'create_profile_menu' (lines 4713-4781)\n  function_normalize_menu_path_4783: function 'normalize_menu_path' (lines 4783-4785)\n  function_generate_menu_style_4787: function 'generate_menu_style' (lines 4787-4790)\n  function_create_app_menu_4792: function 'create_app_menu' (lines 4792-4807)\n  function_get_active_roles_4809: function 'get_active_roles' (lines 4809-4822)\n  function_get_role_priorities_4824: function 'get_role_priorities' (lines 4824-4837)\n  function_group_plugins_by_role_4839: function 'group_plugins_by_role' (lines 4839-4857)\n  function_get_plugin_numeric_prefix_4859: function 'get_plugin_numeric_prefix' (lines 4859-4866)\n  function_create_home_menu_item_4868: function 'create_home_menu_item' (lines 4868-4889)\n  function_get_plugin_primary_role_4891: function 'get_plugin_primary_role' (lines 4891-4908)\n  function_create_plugin_menu_item_4910: function 'create_plugin_menu_item' (lines 4910-4930)\n  function_should_include_plugin_4932: function 'should_include_plugin' (lines 4932-4941)\n  function_create_menu_container_4943: function 'create_menu_container' (lines 4943-4945)\n  function_get_dynamic_role_css_4947: function 'get_dynamic_role_css' (lines 4947-5032)\n  other_other_5034_5034: other 'other_5034' (lines 5034-5075)\n  function_get_workflow_instance_5078: function 'get_workflow_instance' (lines 5078-5088)\n  other_other_5090_5090: other 'other_5090' (lines 5090-5159)\n  function_create_chat_interface_5161: function 'create_chat_interface' (lines 5161-5177)\n  assignment_is_streaming_5180: assignment 'is_streaming' (lines 5180-5180)\n  function_mk_chat_input_group_5182: function 'mk_chat_input_group' (lines 5182-5236)\n  other_other_5241_5241: other 'other_5241' (lines 5241-5423)\n  other_other_5426_5426: other 'other_5426' (lines 5426-5434)\n  other_other_5437_5437: other 'other_5437' (lines 5437-5438)\n  other_other_5441_5441: other 'other_5441' (lines 5441-5443)\n  function_redirect_handler_5446: function 'redirect_handler' (lines 5446-5461)\n  other_other_5464_5464: other 'other_5464' (lines 5464-5511)\n  other_other_5514_5514: other 'other_5514' (lines 5514-5567)\n  other_other_5570_5570: other 'other_5570' (lines 5570-5597)\n  other_other_5600_5600: other 'other_5600' (lines 5600-5648)\n  other_other_5651_5651: other 'other_5651' (lines 5651-5704)\n  other_other_5707_5707: other 'other_5707' (lines 5707-5767)\n  other_other_5770_5770: other 'other_5770' (lines 5770-5773)\n  other_other_5776_5776: other 'other_5776' (lines 5776-5809)\n  other_other_5812_5812: other 'other_5812' (lines 5812-5820)\n  other_other_5823_5823: other 'other_5823' (lines 5823-5922)\n  other_other_5925_5925: other 'other_5925' (lines 5925-5958)\n  other_other_5961_5961: other 'other_5961' (lines 5961-5966)\n  other_other_5973_5973: other 'other_5973' (lines 5973-6075)\n  other_other_6078_6078: other 'other_6078' (lines 6078-6109)\n  other_other_6112_6112: other 'other_6112' (lines 6112-6208)\n  other_other_6211_6211: other 'other_6211' (lines 6211-6283)\n  other_other_6286_6286: other 'other_6286' (lines 6286-6358)\n  other_other_6361_6361: other 'other_6361' (lines 6361-6381)\n  other_other_6384_6384: other 'other_6384' (lines 6384-6454)\n  class_domskeletonmiddleware_6456: class 'DOMSkeletonMiddleware' (lines 6456-6538)\n  function_print_routes_6540: function 'print_routes' (lines 6540-6578)\n  other_other_6581_6581: other 'other_6581' (lines 6581-6585)\n  other_other_6588_6588: other 'other_6588' (lines 6588-6634)\n  other_other_6636_6636: other 'other_6636' (lines 6636-6644)\n  other_other_6646_6646: other 'other_6646' (lines 6646-6672)\n  other_other_6674_6674: other 'other_6674' (lines 6674-6758)\n  other_other_6760_6760: other 'other_6760' (lines 6760-6839)\n  other_other_6842_6842: other 'other_6842' (lines 6842-6914)\n  assignment_all_routes_6917: assignment 'ALL_ROUTES' (lines 6917-6917)\n  other_other_6918_6918: other 'other_6918' (lines 6918-6923)\n  other_other_6924_6924: other 'other_6924' (lines 6924-6924)\n  other_other_6925_6925: other 'other_6925' (lines 6925-6925)\n  other_other_6926_6926: other 'other_6926' (lines 6926-6926)\n  function_check_syntax_6928: function 'check_syntax' (lines 6928-6939)\n  function_check_server_already_running_6941: function 'check_server_already_running' (lines 6941-6974)\n  function_restart_server_6977: function 'restart_server' (lines 6977-7002)\n  class_serverrestarthandler_7004: class 'ServerRestartHandler' (lines 7004-7024)\n  function_run_server_with_watchdog_7026: function 'run_server_with_watchdog' (lines 7026-7083)\n  other_other_7084_7084: other 'other_7084' (lines 7084-7124)\n\nSafe slice boundaries:\n  Lines 1-1\n  Lines 2-2\n  Lines 3-3\n  Lines 4-4\n  Lines 5-5\n  Lines 6-6\n  Lines 7-7\n  Lines 8-8\n  Lines 9-9\n  Lines 10-10\n  Lines 11-11\n  Lines 12-12\n  Lines 13-13\n  Lines 14-14\n  Lines 15-15\n  Lines 16-16\n  Lines 17-17\n  Lines 19-19\n  Lines 20-20\n  Lines 21-21\n  Lines 22-22\n  Lines 23-23\n  Lines 25-25\n  Lines 26-26\n  Lines 27-27\n  Lines 28-28\n  Lines 29-29\n  Lines 30-30\n  Lines 31-31\n  Lines 32-32\n  Lines 33-33\n  Lines 34-34\n  Lines 35-35\n  Lines 36-36\n  Lines 37-37\n  Lines 38-38\n  Lines 39-39\n  Lines 40-40\n  Lines 41-41\n  Lines 42-42\n  Lines 43-43\n  Lines 44-44\n  Lines 48-48\n  Lines 50-50\n  Lines 52-52\n  Lines 55-55\n  Lines 58-58\n  Lines 59-59\n  Lines 60-60\n  Lines 63-63\n  Lines 64-64\n  Lines 65-65\n  Lines 71-107\n  Lines 109-109\n  Lines 111-122\n  Lines 123-123\n  Lines 126-189\n  Lines 192-197\n  Lines 200-206\n  Lines 209-213\n  Lines 217-222\n  Lines 225-334\n  Lines 337-421\n  Lines 424-424\n  Lines 427-428\n  Lines 432-432\n  Lines 434-438\n  Lines 440-440\n  Lines 443-447\n  Lines 449-451\n  Lines 453-455\n  Lines 457-460\n  Lines 462-467\n  Lines 469-482\n  Lines 484-489\n  Lines 491-498\n  Lines 500-532\n  Lines 534-588\n  Lines 590-590\n  Lines 592-592\n  Lines 593-593\n  Lines 595-595\n  Lines 596-596\n  Lines 599-599\n  Lines 600-600\n  Lines 601-601\n  Lines 602-602\n  Lines 603-603\n  Lines 604-604\n  Lines 606-606\n  Lines 609-609\n  Lines 611-611\n  Lines 613-613\n  Lines 622-814\n  Lines 817-817\n  Lines 818-818\n  Lines 828-836\n  Lines 851-866\n  Lines 881-932\n  Lines 934-983\n  Lines 985-1040\n  Lines 1052-1100\n  Lines 1102-1104\n  Lines 1106-1162\n  Lines 1164-1199\n  Lines 1201-1234\n  Lines 1236-1300\n  Lines 1302-1318\n  Lines 1320-1436\n  Lines 1438-1508\n  Lines 1509-1509\n  Lines 1511-1540\n  Lines 1541-1541\n  Lines 1543-1562\n  Lines 1563-1566\n  Lines 1567-1567\n  Lines 1568-1568\n  Lines 1570-1627\n  Lines 1629-1643\n  Lines 1645-1650\n  Lines 1652-1673\n  Lines 1675-3226\n  Lines 3228-3343\n  Lines 3346-3497\n  Lines 3500-3512\n  Lines 3514-3548\n  Lines 3551-3551\n  Lines 3610-3716\n  Lines 3718-3718\n  Lines 3719-3719\n  Lines 3721-3721\n  Lines 3722-3722\n  Lines 3724-3728\n  Lines 3730-3730\n  Lines 3731-3731\n  Lines 3734-3734\n  Lines 3735-3735\n  Lines 3737-3768\n  Lines 3770-3795\n  Lines 3796-3796\n  Lines 3798-3819\n  Lines 3821-3894\n  Lines 3895-3895\n  Lines 3896-3896\n  Lines 3898-3949\n  Lines 3950-3950\n  Lines 3952-4052\n  Lines 4054-4100\n  Lines 4102-4137\n  Lines 4139-4140\n  Lines 4142-4142\n  Lines 4143-4143\n  Lines 4144-4144\n  Lines 4145-4145\n  Lines 4146-4146\n  Lines 4150-4150\n  Lines 4152-4181\n  Lines 4183-4198\n  Lines 4200-4211\n  Lines 4213-4234\n  Lines 4235-4323\n  Lines 4324-4332\n  Lines 4333-4333\n  Lines 4334-4334\n  Lines 4337-4419\n  Lines 4421-4421\n  Lines 4422-4424\n  Lines 4427-4427\n  Lines 4428-4428\n  Lines 4429-4429\n  Lines 4431-4431\n  Lines 4433-4433\n  Lines 4435-4443\n  Lines 4445-4445\n  Lines 4448-4448\n  Lines 4451-4451\n  Lines 4453-4453\n  Lines 4454-4454\n  Lines 4455-4455\n  Lines 4458-4458\n  Lines 4461-4461\n  Lines 4464-4464\n  Lines 4467-4467\n  Lines 4468-4469\n  Lines 4470-4470\n  Lines 4473-4473\n  Lines 4478-4478\n  Lines 4481-4481\n  Lines 4484-4484\n  Lines 4487-4487\n  Lines 4490-4490\n  Lines 4493-4494\n  Lines 4497-4499\n  Lines 4501-4501\n  Lines 4502-4502\n  Lines 4504-4514\n  Lines 4516-4573\n  Lines 4575-4588\n  Lines 4590-4654\n  Lines 4656-4711\n  Lines 4713-4781\n  Lines 4783-4785\n  Lines 4787-4790\n  Lines 4792-4807\n  Lines 4809-4822\n  Lines 4824-4837\n  Lines 4839-4857\n  Lines 4859-4866\n  Lines 4868-4889\n  Lines 4891-4908\n  Lines 4910-4930\n  Lines 4932-4941\n  Lines 4943-4945\n  Lines 4947-5032\n  Lines 5034-5075\n  Lines 5078-5088\n  Lines 5090-5159\n  Lines 5161-5177\n  Lines 5180-5180\n  Lines 5182-5236\n  Lines 5241-5423\n  Lines 5426-5434\n  Lines 5437-5438\n  Lines 5441-5443\n  Lines 5446-5461\n  Lines 5464-5511\n  Lines 5514-5567\n  Lines 5570-5597\n  Lines 5600-5648\n  Lines 5651-5704\n  Lines 5707-5767\n  Lines 5770-5773\n  Lines 5776-5809\n  Lines 5812-5820\n  Lines 5823-5922\n  Lines 5925-5958\n  Lines 5961-5966\n  Lines 5973-6075\n  Lines 6078-6109\n  Lines 6112-6208\n  Lines 6211-6283\n  Lines 6286-6358\n  Lines 6361-6381\n  Lines 6384-6454\n  Lines 6456-6538\n  Lines 6540-6578\n  Lines 6581-6585\n  Lines 6588-6634\n  Lines 6636-6644\n  Lines 6646-6672\n  Lines 6674-6758\n  Lines 6760-6839\n  Lines 6842-6914\n  Lines 6917-6917\n  Lines 6918-6923\n  Lines 6924-6924\n  Lines 6925-6925\n  Lines 6926-6926\n  Lines 6928-6939\n  Lines 6941-6974\n  Lines 6977-7002\n  Lines 7004-7024\n  Lines 7026-7083\n  Lines 7084-7124\n",
    "stderr": ""
  },
  "dependency_state": {
    "server.py": {
      "file_path": "server.py",
      "total_lines": 7125,
      "non_empty_lines": 6188,
      "total_characters": 348689,
      "token_estimate": 29438,
      "file_size_bytes": 350173,
      "last_modified": "2025-07-04T11:48:35.144996"
    },
    "mcp_tools.py": {
      "file_path": "mcp_tools.py",
      "total_lines": 5948,
      "non_empty_lines": 5092,
      "total_characters": 267786,
      "token_estimate": 19696,
      "file_size_bytes": 268636,
      "last_modified": "2025-07-04T16:58:33.121203"
    },
    "common.py": {
      "file_path": "common.py",
      "total_lines": 447,
      "non_empty_lines": 387,
      "total_characters": 21091,
      "token_estimate": 1643,
      "file_size_bytes": 21163,
      "last_modified": "2025-07-04T11:48:35.140996"
    }
  },
  "total_tokens": 50777,
  "target_budget": 130000,
  "reduction_needed": 0
}